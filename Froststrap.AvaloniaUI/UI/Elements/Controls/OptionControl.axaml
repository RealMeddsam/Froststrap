<UserControl x:Class="Froststrap.UI.Elements.Controls.OptionControl"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="clr-namespace:Froststrap.UI.ViewModels"
    xmlns:ui="clr-namespace:Froststrap.UI.Elements.Controls"
    xmlns:icon="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
    x:Name="Control">

    <Border
        Margin="0,8,0,0"
        Padding="14"
        Background="{DynamicResource CardBackgroundBrush}"
        BorderBrush="{DynamicResource CardBorderBrush}"
        BorderThickness="1"
        CornerRadius="4">

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock FontSize="14" Text="{Binding Header, ElementName=Control}" />

                    <TextBlock x:Name="HelpLinkText" Margin="4,0,0,0"
                               IsVisible="{Binding HelpLink, ElementName=Control, Converter={x:Static ObjectConverters.IsNotNull}}">
                        <HyperlinkButton
                            Command="{x:Static models:GlobalViewModel.OpenWebpageCommand}"
                            CommandParameter="{Binding HelpLink, ElementName=Control}">
                            <icon:SymbolIcon Symbol="Help" Foreground="{DynamicResource SystemAccentColorSecondary}"/>
                        </HyperlinkButton>
                    </TextBlock>
                </StackPanel>

                <ui:MarkdownTextBlock x:Name="MarkdownText"
                    Margin="0,2,0,0"
                    FontSize="12"
                    Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                    MarkdownText="{Binding Description, ElementName=Control}"
                    TextWrapping="Wrap"
                    IsVisible="{Binding Description, ElementName=Control, Converter={x:Static ObjectConverters.IsNotNull}}"/>
            </StackPanel>

            <ContentPresenter
                Grid.Column="1"
                Margin="1,0,0,0"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Content="{Binding InnerContent, ElementName=Control}" 
                IsVisible="{Binding InnerContent, ElementName=Control, Converter={x:Static ObjectConverters.IsNotNull}}"/>
        </Grid>
    </Border>
</UserControl>