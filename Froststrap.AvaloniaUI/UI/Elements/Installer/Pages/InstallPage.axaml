<UserControl x:Class="Froststrap.UI.Elements.Installer.Pages.InstallPage"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
             xmlns:resources="clr-namespace:Froststrap.Resources"
             xmlns:controls="clr-namespace:Froststrap.UI.Elements.Controls"
             xmlns:vm="clr-namespace:Froststrap.UI.ViewModels.Installer"
             x:DataType="vm:InstallViewModel"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">

	<ScrollViewer VerticalScrollBarVisibility="Auto">
		<StackPanel Margin="0,0,14,14" Spacing="8">
			<TextBlock FontSize="20" FontWeight="SemiBold"
                       Text="{x:Static resources:Strings.Installer_Install_Location_Title}"
                       TextWrapping="Wrap" />
			<TextBlock FontSize="14"
                       Text="{x:Static resources:Strings.Installer_Install_Location_Text}"
                       TextWrapping="Wrap" />

			<Border Background="{DynamicResource ControlFillColorDefaultBrush}"
                    BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="12"
                    Margin="0,8,0,0">
				<Grid ColumnDefinitions="*, Auto, Auto">
					<TextBox Grid.Column="0" Margin="0,0,4,0"
                             Text="{Binding InstallLocation, Mode=TwoWay}"
                             VerticalAlignment="Center"/>

					<Button Grid.Column="1" Margin="4,0,4,0" Height="35" Command="{Binding BrowseInstallLocationCommand}">
                        <StackPanel>
							<TextBlock Text="{x:Static resources:Strings.Common_Browse}" Margin="0,0,4,0" />
                            <ui:SymbolIcon Symbol="Folder" />
                        </StackPanel>
					</Button>

					<Button Grid.Column="2" Margin="4,0,0,0" Height="35"
                               Command="{Binding ResetInstallLocationCommand}">
                        <StackPanel>
							<TextBlock Text="{x:Static resources:Strings.Common_Reset}" Margin="0,0,4,0" />
                            <ui:SymbolIcon Symbol="Refresh" />
                        </StackPanel>
					</Button>
				</Grid>
			</Border>

			<TextBlock Margin="0,8,0,0" FontSize="14"
                       Text="{x:Static resources:Strings.Installer_Install_Location_DataFound}"
                       IsVisible="{Binding DataFoundMessageVisibility}"
                       TextWrapping="Wrap" />

			<TextBlock FontSize="20" FontWeight="SemiBold"
                       Text="{x:Static resources:Strings.Common_Shortcuts}"
                       TextWrapping="Wrap" Margin="0,16,0,0" />
			<TextBlock FontSize="14"
                       Text="{x:Static resources:Strings.Installer_Install_Shortcuts_Description}"
                       TextWrapping="Wrap" />

			<Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto" Margin="0,8,0,0">
				<controls:OptionControl Grid.Column="0" Margin="0,0,4,0"
                                      Header="{x:Static resources:Strings.Common_Shortcuts_Desktop}">
					<ToggleSwitch IsChecked="{Binding CreateDesktopShortcuts, Mode=TwoWay}" />
				</controls:OptionControl>

				<controls:OptionControl Grid.Column="1" Margin="4,0,0,0"
                                      Header="{x:Static resources:Strings.Common_Shortcuts_StartMenu}">
					<ToggleSwitch IsChecked="{Binding CreateStartMenuShortcuts, Mode=TwoWay}" />
				</controls:OptionControl>

				<controls:OptionControl Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,12,4,0"
                                      Header="Import Settings From"
                                      Description="Choose which application's settings to import into this installation.">
					<ComboBox Width="150"
                              ItemsSource="{Binding AvailableImportSources}"
                              SelectedItem="{Binding SelectedImportSource, Mode=TwoWay}"
                              IsEnabled="{Binding ImportSettingsEnabled}">
						<ComboBox.ItemTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding}" />
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</controls:OptionControl>
			</Grid>

			<TextBlock Margin="0,8,0,0" FontSize="14"
                       Text="{Binding ErrorMessage}"
                       Foreground="{DynamicResource SystemFillColorCriticalBrush}"
                       TextWrapping="Wrap"
                       IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />

			<ui:InfoBar Margin="0,8,0,0" Padding="8"
                        Title="{x:Static resources:Strings.Installer_InstallationNotFound}"
                        IsOpen="{Binding ShowNotFound}"
                        Severity="Warning"
                        IsClosable="False" />
		</StackPanel>
	</ScrollViewer>
</UserControl>