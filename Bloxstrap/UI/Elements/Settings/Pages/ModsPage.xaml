<ui:UiPage
    x:Class="Bloxstrap.UI.Elements.Settings.Pages.ModsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Bloxstrap.UI.Elements.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dmodels="clr-namespace:Bloxstrap.UI.ViewModels.Settings"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:Bloxstrap.UI.ViewModels"
    xmlns:resources="clr-namespace:Bloxstrap.Resources"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="ModsPage"
    d:DesignHeight="1500"
    d:DesignWidth="800"
    Scrollable="True"
    mc:Ignorable="d">

    <StackPanel Margin="0,0,14,14">

        <!--  Description TextBlock  -->
        <TextBlock
            FontSize="14"
            Foreground="{StaticResource TextFillColorSecondaryBrush}"
            Text="{x:Static resources:Strings.Menu_Mods_Description}"
            TextWrapping="Wrap" />

        <!--  Grid for Cards  -->
        <Grid Margin="0,16,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Open Mods Folder Card  -->
            <ui:CardAction
                x:Name="OpenModFolderCardAction"
                Grid.Row="0"
                Grid.Column="1"
                Margin="4,0,0,0"
                Command="{Binding OpenModsFolderCommand}"
                Icon="Folder24">
                <StackPanel>
                    <TextBlock
                        FontSize="14"
                        Text="{x:Static resources:Strings.Menu_Mods_OpenModsFolder_Title}"
                        TextWrapping="Wrap" />
                    <TextBlock
                        Margin="0,2,0,0"
                        FontSize="12"
                        Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                        Text="{x:Static resources:Strings.Menu_Mods_OpenModsFolder_Description}"
                        TextWrapping="Wrap" />
                </StackPanel>
            </ui:CardAction>

            <!--  Help Card  -->
            <ui:CardAction
                Grid.Row="0"
                Grid.Column="0"
                Margin="0,0,4,0"
                Command="models:GlobalViewModel.OpenWebpageCommand"
                CommandParameter="https://github.com/bloxstraplabs/bloxstrap/wiki/Adding-custom-mods"
                Icon="BookQuestionMark24">
                <StackPanel>
                    <TextBlock FontSize="14" Text="{x:Static resources:Strings.Common_Help}" />
                    <TextBlock
                        Margin="0,2,0,0"
                        Padding="0,0,16,0"
                        FontSize="12"
                        Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                        Text="{x:Static resources:Strings.Menu_Mods_Help_Description}"
                        TextWrapping="Wrap" />
                </StackPanel>
            </ui:CardAction>


            <!--  Compatibility Settings Card  -->
            <ui:CardAction
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Margin="0,7,0,0"
                VerticalAlignment="Top"
                Command="{Binding OpenCompatSettingsCommand}"
                Icon="WindowWrench24">
                <StackPanel>
                    <TextBlock
                        FontSize="14"
                        Text="{x:Static resources:Strings.Menu_Mods_Misc_CompatibilitySettings_Title}"
                        TextWrapping="Wrap" />
                    <controls:MarkdownTextBlock
                        Margin="0,2,0,0"
                        FontSize="12"
                        Foreground="{StaticResource TextFillColorTertiaryBrush}"
                        MarkdownText="{Binding Source={x:Static resources:Strings.Menu_Mods_Misc_CompatibilitySettings_Description}, Converter={StaticResource StringFormatConverter}, ConverterParameter='https://devblogs.microsoft.com/directx/demystifying-full-screen-optimizations/'}"
                        TextWrapping="Wrap" />
                </StackPanel>
            </ui:CardAction>
        </Grid>

        <Separator Margin="0,8,0,0" />

        <TabControl Margin="0,16,0,0">
            <TabItem FontWeight="Bold" Header="Preset Mod">
                <StackPanel Height="Auto" Margin="8">

                    <!--  Presets Section  -->
                    <TextBlock
                        FontSize="20"
                        FontWeight="Bold"
                        Text="{x:Static resources:Strings.Common_Presets}" />

                    <!--  Option Controls  -->
                    <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Presets_OldAvatarEditor_Description}" Header="{x:Static resources:Strings.Menu_Mods_Presets_OldAvatarEditor_Title}">
                        <ui:ToggleSwitch IsChecked="{Binding OldAvatarBackgroundTask.NewState, Mode=TwoWay}" />
                    </controls:OptionControl>

                    <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Presets_OldCharacterSounds_Description}" Header="{x:Static resources:Strings.Menu_Mods_Presets_OldCharacterSounds_Title}">
                        <ui:ToggleSwitch IsChecked="{Binding OldCharacterSoundsTask.NewState, Mode=TwoWay}" />
                    </controls:OptionControl>

                    <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Presets_MouseCursor_Description}" Header="{x:Static resources:Strings.Menu_Mods_Presets_MouseCursor_Title}">
                        <ComboBox
                            Width="200"
                            Margin="5,0,0,0"
                            Padding="10,5,10,5"
                            ItemsSource="{Binding CursorTypeTask.Selections, Mode=OneTime}"
                            Text="{Binding CursorTypeTask.NewState, Mode=TwoWay}">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=., Converter={StaticResource EnumNameConverter}}" />
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </controls:OptionControl>

                    <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Presets_EmojiType_Description}" Header="{x:Static resources:Strings.Menu_Mods_Presets_EmojiType_Title}">
                        <ComboBox
                            Width="220"
                            Margin="5,0,0,0"
                            Padding="10,5,10,5"
                            ItemsSource="{Binding EmojiFontTask.Selections, Mode=OneTime}"
                            Text="{Binding EmojiFontTask.NewState, Mode=TwoWay}">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=., Converter={StaticResource EnumNameConverter}}" />
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </controls:OptionControl>

                    <Separator Margin="0,8,0,8" />

                    <!--  Miscellaneous Section  -->
                    <TextBlock
                        FontSize="20"
                        FontWeight="Bold"
                        Text="{x:Static resources:Strings.Common_Miscellaneous}" />

                    <!--  Custom Font Option  -->
                    <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Misc_CustomFont_Description}" Header="{x:Static resources:Strings.Menu_Mods_Misc_CustomFont_Title}">
                        <StackPanel>
                            <ui:Button
                                Command="{Binding ManageCustomFontCommand}"
                                Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomFont_Choose}"
                                Icon="DocumentAdd16"
                                Visibility="{Binding ChooseCustomFontVisibility, Mode=OneWay}" />
                            <ui:Button
                                Appearance="Danger"
                                Command="{Binding ManageCustomFontCommand}"
                                Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomFont_Remove}"
                                Icon="Delete16"
                                Visibility="{Binding DeleteCustomFontVisibility, Mode=OneWay}" />
                        </StackPanel>
                    </controls:OptionControl>

                    <!--  Custom Death Sound Option  -->
                    <controls:OptionControl 
                        Description="{x:Static resources:Strings.Menu_Mods_Misc_CustomDeathSound_Description}" 
                        Header="{x:Static resources:Strings.Menu_Mods_Misc_CustomDeathSound_Title}">
                        <StackPanel>
                            <ui:Button
                                Command="{Binding AddCustomDeathSoundCommand}"
                                Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomDeathSound_Choose}"
                                Icon="DocumentAdd16"
                                Visibility="{Binding ChooseCustomDeathSoundVisibility, Mode=OneWay}" />
                            <ui:Button
                                Appearance="Danger"
                                Command="{Binding RemoveCustomDeathSoundCommand}"
                                Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomDeathSound_Remove}"
                                Icon="Delete16"
                                Visibility="{Binding DeleteCustomDeathSoundVisibility, Mode=OneWay}" />
                        </StackPanel>
                    </controls:OptionControl>

                    <ui:CardExpander
                        Grid.Row="1"
                        Margin="0,8,0,0"
                        IsExpanded="False">
                        <ui:CardExpander.Header>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Column="0">
                                    <TextBlock FontSize="14" Text="{x:Static resources:Strings.Menu_Mods_Misc_CardExpander_CustomCursors_Title}" />
                                    <TextBlock FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Text="{x:Static resources:Strings.Menu_Mods_Misc_CardExpander_CustomCursors_Descriptions}" />
                                </StackPanel>
                            </Grid>
                        </ui:CardExpander.Header>

                        <StackPanel>
                            <!--  Custom Cursor Option  -->
                            <controls:OptionControl Description="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursor_Description}" Header="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursor_Title}">
                                <StackPanel>
                                    <ui:Button
                                        Command="{Binding AddCustomCursorModCommand}"
                                        Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursor_Choose}"
                                        Icon="DocumentAdd16"
                                        Visibility="{Binding ChooseCustomCursorVisibility, Mode=OneWay}" />
                                    <ui:Button
                                        Appearance="Danger"
                                        Command="{Binding RemoveCustomCursorModCommand}"
                                        Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursor_Remove}"
                                        Icon="Delete16"
                                        Visibility="{Binding DeleteCustomCursorVisibility, Mode=OneWay}" />
                                </StackPanel>
                            </controls:OptionControl>

                            <!--  Custom Shiftlock Option  -->
                            <controls:OptionControl 
                                Description="{x:Static resources:Strings.Menu_Mods_Misc_CustomShiftLock_Description}" 
                                Header="{x:Static resources:Strings.Menu_Mods_Misc_CustomShiftLock_Title}">
                                <StackPanel>
                                    <ui:Button
                                        Command="{Binding AddCustomShiftlockModCommand}"
                                        Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomShiftLock_Choose}"
                                        Icon="DocumentAdd16"
                                        Visibility="{Binding ChooseCustomShiftlockVisibility, Mode=OneWay}" />
                                    <ui:Button
                                        Appearance="Danger"
                                        Command="{Binding RemoveCustomShiftlockModCommand}"
                                        Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomShiftLock_Remove}"
                                        Icon="Delete16"
                                        Visibility="{Binding DeleteCustomShiftlockVisibility, Mode=OneWay}" />
                                </StackPanel>
                            </controls:OptionControl>

                            <ui:CardExpander
                                x:Name="RobloxMenuExpander"
                                Grid.Row="1"
                                Margin="0,8,0,0"
                                IsExpanded="False">
                                <ui:CardExpander.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <TextBlock FontSize="14" Text="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_Title}" />
                                            <TextBlock FontSize="12" Foreground="{DynamicResource TextFillColorTertiaryBrush}" Text="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_Description}" />
                                        </StackPanel>
                                    </Grid>
                                </ui:CardExpander.Header>

                                <Grid
                                    MinHeight="300"
                                    MaxHeight="500"
                                    Margin="-8,4,-8,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="300" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="250" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <!--  Left: List and buttons  -->
                                    <ListBox
                                        x:Name="CustomThemesListBox"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Margin="0,0,4,0"
                                        DisplayMemberPath="Name"
                                        ItemsSource="{Binding CustomCursorSets}"
                                        SelectedIndex="{Binding SelectedCustomCursorSetIndex, Mode=TwoWay}" />

                                    <Grid
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Margin="0,8,4,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <ui:Button
                                            Grid.Column="0"
                                            Height="32"
                                            Margin="0,0,4,0"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center"
                                            Command="{Binding AddCustomCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Common_New}"
                                            Icon="Add28" />
                                        <ui:Button
                                            Grid.Column="1"
                                            Height="32"
                                            Margin="4,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            VerticalAlignment="Center"
                                            Appearance="Danger"
                                            Command="{Binding DeleteCustomCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Common_Delete}"
                                            Icon="Delete28"
                                            IsEnabled="{Binding IsCustomCursorSetSelected}" />
                                    </Grid>

                                    <StackPanel
                                        Grid.RowSpan="2"
                                        Grid.Column="1"
                                        Margin="4,0,0,0">
                                        <StackPanel.Style>
                                            <Style TargetType="StackPanel">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsCustomCursorSetSelected}" Value="False">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </StackPanel.Style>

                                        <Grid Margin="0,0,0,48">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="16" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>

                                            <Grid
                                                Grid.Row="0"
                                                Grid.ColumnSpan="4"
                                                Margin="0,16,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <ui:TextBox
                                                    Grid.Column="0"
                                                    HorizontalAlignment="Stretch"
                                                    PlaceholderText="Custom Cursor Set 1"
                                                    Text="{Binding SelectedCustomCursorSetName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <ui:Button
                                                    Grid.Column="1"
                                                    Margin="4,0,0,0"
                                                    Command="{Binding RenameCustomCursorSetCommand}"
                                                    Content="{x:Static resources:Strings.Common_Rename}"
                                                    Icon="Edit28" />
                                            </Grid>

                                            <!--  ShiftLock  -->
                                            <Grid
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="4,16,8,16">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Margin="0,0,0,8"
                                                    FontSize="14"
                                                    Text="ShiftLock"
                                                    TextAlignment="Center" />
                                                <Border
                                                    Grid.Row="1"
                                                    MinWidth="100"
                                                    MinHeight="100"
                                                    MaxWidth="200"
                                                    MaxHeight="200"
                                                    Margin="0,0,0,8"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    Background="#33000000"
                                                    CornerRadius="16">
                                                    <Viewbox Stretch="Uniform">
                                                        <Image
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Source="{Binding ShiftlockCursorPreview}"
                                                            Stretch="Uniform" />
                                                    </Viewbox>
                                                </Border>
                                                <StackPanel
                                                    Grid.Row="2"
                                                    Margin="0,8,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding AddShiftlockCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Browse}"
                                                        Icon="Folder28"
                                                        Visibility="{Binding AddShiftlockCursorVisibility}" />
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Appearance="Danger"
                                                        Command="{Binding DeleteShiftlockCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Remove}"
                                                        Icon="Delete28"
                                                        Visibility="{Binding DeleteShiftlockCursorVisibility}" />
                                                </StackPanel>
                                            </Grid>

                                            <!--  Arrow Cursor  -->
                                            <Grid
                                                Grid.Row="2"
                                                Grid.Column="1"
                                                Margin="8,16,8,16">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Margin="0,0,0,8"
                                                    FontSize="14"
                                                    Text="Arrow Cursor"
                                                    TextAlignment="Center" />
                                                <Border
                                                    Grid.Row="1"
                                                    MinWidth="100"
                                                    MinHeight="100"
                                                    MaxWidth="200"
                                                    MaxHeight="200"
                                                    Margin="0,0,0,8"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    Background="#33000000"
                                                    CornerRadius="16">
                                                    <Viewbox Stretch="Uniform">
                                                        <Image
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Source="{Binding ArrowCursorPreview}"
                                                            Stretch="Uniform" />
                                                    </Viewbox>
                                                </Border>
                                                <StackPanel
                                                    Grid.Row="2"
                                                    Margin="0,8,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding AddArrowCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Browse}"
                                                        Icon="Folder28"
                                                        Visibility="{Binding AddArrowCursorVisibility}" />
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Appearance="Danger"
                                                        Command="{Binding DeleteArrowCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Remove}"
                                                        Icon="Delete28"
                                                        Visibility="{Binding DeleteArrowCursorVisibility}" />
                                                </StackPanel>
                                            </Grid>

                                            <!--  Arrow Far Cursor  -->
                                            <Grid
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                Margin="8,16,8,16">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Margin="0,0,0,8"
                                                    FontSize="14"
                                                    Text="ArrowFar Cursor"
                                                    TextAlignment="Center" />
                                                <Border
                                                    Grid.Row="1"
                                                    MinWidth="100"
                                                    MinHeight="100"
                                                    MaxWidth="200"
                                                    MaxHeight="200"
                                                    Margin="0,0,0,8"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    Background="#33000000"
                                                    CornerRadius="16">
                                                    <Viewbox Stretch="Uniform">
                                                        <Image
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Source="{Binding ArrowFarCursorPreview}"
                                                            Stretch="Uniform" />
                                                    </Viewbox>
                                                </Border>
                                                <StackPanel
                                                    Grid.Row="2"
                                                    Margin="0,8,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding AddArrowFarCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Browse}"
                                                        Icon="Folder28"
                                                        Visibility="{Binding AddArrowFarCursorVisibility}" />
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Appearance="Danger"
                                                        Command="{Binding DeleteArrowFarCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Remove}"
                                                        Icon="Delete28"
                                                        Visibility="{Binding DeleteArrowFarCursorVisibility}" />
                                                </StackPanel>
                                            </Grid>

                                            <!--  IBeam Cursor  -->
                                            <Grid
                                                Grid.Row="2"
                                                Grid.Column="3"
                                                Margin="8,16,4,16">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <TextBlock
                                                    Grid.Row="0"
                                                    Margin="0,0,0,8"
                                                    FontSize="14"
                                                    Text="IBeam Cursor"
                                                    TextAlignment="Center" />
                                                <Border
                                                    Grid.Row="1"
                                                    MinWidth="100"
                                                    MinHeight="100"
                                                    MaxWidth="200"
                                                    MaxHeight="200"
                                                    Margin="0,0,0,8"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch"
                                                    Background="#33000000"
                                                    CornerRadius="16">
                                                    <Viewbox Stretch="Uniform">
                                                        <Image
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Source="{Binding IBeamCursorPreview}"
                                                            Stretch="Uniform" />
                                                    </Viewbox>
                                                </Border>
                                                <StackPanel
                                                    Grid.Row="2"
                                                    Margin="0,8,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Top"
                                                    Orientation="Vertical">
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Command="{Binding AddIBeamCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Browse}"
                                                        Icon="Folder28"
                                                        Visibility="{Binding AddIBeamCursorVisibility}" />
                                                    <ui:Button
                                                        Height="32"
                                                        HorizontalAlignment="Stretch"
                                                        Appearance="Danger"
                                                        Command="{Binding DeleteIBeamCursorCommand}"
                                                        Content="{x:Static resources:Strings.Common_Remove}"
                                                        Icon="Delete28"
                                                        Visibility="{Binding DeleteIBeamCursorVisibility}" />
                                                </StackPanel>
                                            </Grid>
                                        </Grid>
                                    </StackPanel>

                                    <!--  Bottom toolbar buttons  -->
                                    <Grid
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Height="36"
                                        Margin="0,8,0,0">
                                        <Grid.Style>
                                            <Style TargetType="Grid">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsCustomCursorSetSelected}" Value="False">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Grid.Style>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <ui:Button
                                            Grid.Column="0"
                                            Height="32"
                                            Margin="4,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            Command="{Binding ApplyCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_ApplySet}"
                                            Icon="Checkmark20" />
                                        <ui:Button
                                            Grid.Column="1"
                                            Height="32"
                                            Margin="4,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            Command="{Binding GetCurrentCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_FetchSet}"
                                            Icon="CollectionsAdd24" />
                                        <ui:Button
                                            Grid.Column="2"
                                            Height="32"
                                            Margin="4,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            Command="{Binding ImportCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_ImportSet}"
                                            Icon="FolderZip24" />
                                        <ui:Button
                                            Grid.Column="3"
                                            Height="32"
                                            Margin="4,0,0,0"
                                            HorizontalAlignment="Stretch"
                                            Command="{Binding ExportCursorSetCommand}"
                                            Content="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_ExportSet}"
                                            Icon="ArrowExportRtl24" />
                                    </Grid>

                                    <TextBlock
                                        Grid.RowSpan="2"
                                        Grid.Column="1"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Text="{x:Static resources:Strings.Menu_Mods_Misc_CustomCursorSet_NoneSelected}"
                                        TextAlignment="Center">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsCustomCursorSetSelected}" Value="True">
                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </ui:CardExpander>
                        </StackPanel>
                    </ui:CardExpander>
                </StackPanel>
            </TabItem>

            <TabItem FontWeight="Bold" Header="{x:Static resources:Strings.Menu_Mods_ModGenerator_Title}">
                <Grid Margin="8,12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="320" />
                        </Grid.ColumnDefinitions>

                        <Border
                            Grid.Column="0"
                            Margin="0,0,12,0"
                            Padding="12"
                            Background="{DynamicResource NormalDarkAndLightBackground}"
                            CornerRadius="12">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <TextBlock
                                    Margin="0,0,0,8"
                                    FontSize="14"
                                    Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_SheetPreview}" />
                                <Border
                                    Grid.Row="1"
                                    Padding="8"
                                    Background="{DynamicResource NormalDarkAndLightBackground}"
                                    CornerRadius="8">
                                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                        <Image
                                            x:Name="SheetPreview"
                                            RenderOptions.BitmapScalingMode="HighQuality"
                                            Stretch="Uniform" />
                                    </ScrollViewer>
                                </Border>
                            </Grid>
                        </Border>

                        <Border
                            Grid.Column="1"
                            Padding="12"
                            Background="{DynamicResource NormalDarkAndLightBackground}"
                            CornerRadius="12">
                            <StackPanel>

                                <TextBlock
                                    Margin="0,0,0,8"
                                    FontSize="13"
                                    Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_SheetPreviewSingle}" />
                                <StackPanel Margin="0,0,0,12" VerticalAlignment="Center">
                                    <ComboBox
                                        x:Name="SpriteSelector"
                                        Margin="0,0,0,8"
                                        HorizontalAlignment="Stretch"
                                        SelectionChanged="OnSpriteSelectorChanged" />
                                    <Border
                                        Width="88"
                                        Height="88"
                                        Padding="6"
                                        HorizontalAlignment="Center"
                                        Background="{DynamicResource NormalDarkAndLightBackground}"
                                        CornerRadius="10">
                                        <Image
                                            x:Name="SpritePreview"
                                            Width="72"
                                            Height="72"
                                            RenderOptions.BitmapScalingMode="HighQuality"
                                            Stretch="Uniform" />
                                    </Border>
                                </StackPanel>

                                <Separator Margin="0,8" />

                                <TextBlock
                                    Margin="0,0,0,8"
                                    FontSize="13"
                                    Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_GenerationOptions}" />
                                <StackPanel Margin="0,0,0,8">
                                    <CheckBox
                                        x:Name="CursorsCheckBox"
                                        Margin="0,4"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_GenerationOptions_Cursor}" />
                                    <CheckBox
                                        x:Name="ShiftlockCheckBox"
                                        Margin="0,4"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_GenerationOptions_Shiftlock}" />
                                    <CheckBox
                                        x:Name="VoiceChatCheckBox"
                                        Margin="0,4"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_GenerationOptions_VoiceChat}" />
                                    <CheckBox
                                        x:Name="EmoteWheelCheckBox"
                                        Margin="0,4"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_GenerationOptions_EmoteWheel}" />
                                </StackPanel>

                                <Separator Margin="0,8" />

                                <TextBlock
                                    Margin="0,8,0,6"
                                    FontSize="13"
                                    Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_QuickActions}" />
                                <StackPanel
                                    Margin="0,0,0,8"
                                    HorizontalAlignment="Left"
                                    Orientation="Horizontal">
                                    <Button
                                        x:Name="GenerateModButton"
                                        Click="ModGenerator_Click"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_QuickActions_GenerateMod}" />
                                    <CheckBox
                                        x:Name="IncludeModificationsCheckBox"
                                        Margin="8,0,0,0"
                                        VerticalAlignment="Center"
                                        Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_QuickActions_CopyToModsFolder}" />
                                </StackPanel>

                                <TextBlock
                                    x:Name="DownloadStatusText"
                                    Margin="0,6,0,0"
                                    FontWeight="Bold"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <Border
                        Grid.Row="1"
                        MinHeight="340"
                        Padding="12"
                        Background="{DynamicResource NormalDarkAndLightBackground}"
                        CornerRadius="12">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <StackPanel Margin="0,0,16,0" VerticalAlignment="Top">
                                    <TextBlock
                                        Margin="0,0,0,6"
                                        FontSize="14"
                                        Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_RobloxLOGO}" />
                                    <StackPanel Margin="0,0,0,12" Orientation="Horizontal">
                                        <Button
                                            x:Name="SelectLogoButton"
                                            Click="OnSelectCustomLogo_Click"
                                            Content="{x:Static resources:Strings.Common_Choose}" />
                                        <Button
                                            x:Name="ClearLogoButton"
                                            Margin="8,0,0,0"
                                            Click="OnClearCustomLogo_Click"
                                            Content="{x:Static resources:Strings.Common_Remove}" />
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel VerticalAlignment="Top">
                                    <TextBlock
                                        Margin="0,0,0,6"
                                        FontSize="14"
                                        Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_Spinner}" />
                                    <StackPanel Margin="0,0,0,12" Orientation="Horizontal">
                                        <Button
                                            x:Name="SelectSpinnerButton"
                                            Click="OnSelectCustomSpinner_Click"
                                            Content="{x:Static resources:Strings.Common_Choose}" />
                                        <Button
                                            x:Name="ClearSpinnerButton"
                                            Margin="8,0,0,0"
                                            Click="OnClearCustomSpinner_Click"
                                            Content="{x:Static resources:Strings.Common_Remove}" />
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <Grid Grid.Row="0" Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        VerticalAlignment="Center"
                                        FontSize="14"
                                        Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_GradientColors}" />

                                    <StackPanel
                                        Grid.Column="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Orientation="Horizontal">
                                        <TextBlock
                                            Margin="0,0,8,0"
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            Text="{x:Static resources:Strings.Menu_Mods_ModGenerator_GradientAngle}" />
                                        <TextBox
                                            x:Name="GradientAngleTextBox"
                                            Width="80"
                                            Margin="0,0,8,0"
                                            VerticalContentAlignment="Center"
                                            DataObject.Pasting="GradientAngleTextBox_Pasting"
                                            KeyDown="GradientAngleTextBox_KeyDown"
                                            LostFocus="GradientAngleTextBox_LostFocus"
                                            PreviewTextInput="GradientAngleTextBox_PreviewTextInput"
                                            ToolTip="Enter angle in degrees (0 - 360). Press Enter or leave the box to apply." />
                                        <Button
                                            x:Name="AddStopButton"
                                            Width="160"
                                            Click="OnAddGradientStop_Click"
                                            Content="{x:Static resources:Strings.Menu_Mods_ModGenerator_GradientColors}" />
                                    </StackPanel>
                                </Grid>


                                <ScrollViewer
                                    Grid.Row="2"
                                    MaxHeight="340"
                                    HorizontalScrollBarVisibility="Disabled"
                                    VerticalScrollBarVisibility="Auto">
                                    <ItemsControl ItemsSource="{Binding GradientStops}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Margin="0,2" HorizontalAlignment="Stretch">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="140" />
                                                        <ColumnDefinition Width="80" />
                                                        <ColumnDefinition Width="100" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>

                                                    <TextBlock
                                                        Grid.Column="0"
                                                        Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Text="Offset:" />
                                                    <Slider
                                                        Grid.Column="1"
                                                        Margin="4,8,4,0"
                                                        AutoToolTipPlacement="TopLeft"
                                                        AutoToolTipPrecision="2"
                                                        IsSnapToTickEnabled="True"
                                                        Maximum="1"
                                                        Minimum="0"
                                                        TickFrequency="0.01"
                                                        ValueChanged="OnGradientOffsetChanged"
                                                        Value="{Binding Offset, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                    <TextBlock
                                                        Grid.Column="2"
                                                        Width="30"
                                                        Margin="8,0,8,0"
                                                        VerticalAlignment="Center"
                                                        Text="{Binding Offset, StringFormat=F2}" />
                                                    <TextBox
                                                        Grid.Column="3"
                                                        Width="130"
                                                        MinWidth="100"
                                                        Margin="0,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Text="{Binding ColorHex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        TextChanged="OnGradientColorHexChanged" />
                                                    <Button
                                                        Grid.Column="4"
                                                        Width="75"
                                                        Margin="0,0,4,0"
                                                        Click="OnChangeGradientColor_Click"
                                                        Content="{x:Static resources:Strings.Common_Color}"
                                                        Tag="{Binding}" />
                                                    <Button
                                                        Grid.Column="5"
                                                        Width="95"
                                                        Margin="0,0,4,0"
                                                        Click="OnRemoveGradientStop_Click"
                                                        Content="{x:Static resources:Strings.Common_Remove}"
                                                        Tag="{Binding}" />
                                                    <StackPanel Grid.Column="6" Orientation="Horizontal">
                                                        <Button
                                                            Width="28"
                                                            Margin="0,0,4,0"
                                                            Padding="0"
                                                            Click="OnMoveUpGradientStop_Click"
                                                            Content="▲"
                                                            Tag="{Binding}"
                                                            ToolTip="Move Up" />
                                                        <Button
                                                            Width="28"
                                                            Margin="0,0,4,0"
                                                            Padding="0"
                                                            Click="OnMoveDownGradientStop_Click"
                                                            Content="▼"
                                                            Tag="{Binding}"
                                                            ToolTip="Move Down" />
                                                    </StackPanel>
                                                </Grid>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </StackPanel>
</ui:UiPage>
