<UserControl
    x:Class="Bloxstrap.UI.Elements.Controls.OptionControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Bloxstrap.UI.Elements.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:Bloxstrap.UI.ViewModels"
    xmlns:resources="clr-namespace:Bloxstrap.Resources"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    x:Name="Control"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <ui:Card Margin="0,8,0,0" Padding="14">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock FontSize="14" Text="{Binding Header, ElementName=Control}" />
                    <TextBlock Margin="4,0,0,0">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding HelpLink, ElementName=Control}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                        <Hyperlink
                            Command="models:GlobalViewModel.OpenWebpageCommand"
                            CommandParameter="{Binding HelpLink, ElementName=Control}"
                            TextDecorations="None"
                            ToolTip="{x:Static resources:Strings.Menu_MoreInfo}">
                            <ui:SymbolIcon Margin="0,1,0,0" Symbol="QuestionCircle48">
                                <ui:SymbolIcon.Style>
                                    <Style BasedOn="{StaticResource {x:Type ui:SymbolIcon}}" TargetType="ui:SymbolIcon">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Foreground">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="{DynamicResource SystemAccentColorTertiary}" />
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                        <Setter Property="Foreground">
                                            <Setter.Value>
                                                <SolidColorBrush Color="{DynamicResource SystemAccentColorSecondary}" />
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ui:SymbolIcon.Style>
                            </ui:SymbolIcon>
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>

                <local:MarkdownTextBlock
                    Margin="0,2,0,0"
                    FontSize="12"
                    Foreground="{DynamicResource TextFillColorTertiaryBrush}"
                    MarkdownText="{Binding Description, ElementName=Control}"
                    TextWrapping="Wrap">
                    <local:MarkdownTextBlock.Style>
                        <Style TargetType="local:MarkdownTextBlock">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Description, ElementName=Control}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </local:MarkdownTextBlock.Style>
                </local:MarkdownTextBlock>
            </StackPanel>

            <ContentPresenter
                Grid.Column="1"
                Margin="1,0,0,0"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Content="{Binding InnerContent, ElementName=Control}" />
        </Grid>
    </ui:Card>
</UserControl>